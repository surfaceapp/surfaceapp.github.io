<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=EDGE"/>
		<title>Minimalist Online Markdown Editor</title>
		<meta name="description" content="This is the simplest and slickest online Markdown editor. Just write Markdown and see what it looks like as you type. And convert it to HTML in one click."/>
		<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
		<meta property="og:image" content="http://markdown.pioul.fr/images/markdown.png"/>

		<!-- build:css -->
			<link rel="stylesheet" href="app-shared/css/main.css" type="text/css">
			<link rel="stylesheet" href="app-shared/css/icons.css" type="text/css">
			<link rel="stylesheet" href="animate/animate.min.css" type="text/css">
		<!-- endbuild -->

		<script src="js/jquery-2.0.0.min.js"></script>

		<!-- build:js -->
		<script src="app-shared/js/libs/markdown-it.min.js"></script>
		<script src="app-shared/js/markdown-it-plugins/markdown-it-map-lines.js"></script>
		<script src="app-shared/js/utilities.js"></script>
		<script src="app-shared/js/preview.js"></script>
		<script src="app-shared/js/main.js"></script>
		<script src="js/main.js"></script>
		<!-- endbuild -->
	</head>
	<body class="clearfix">
		<div id="left-column">
			<div id="top_panels_container">
				<div class="top_panel" id="quick-reference">
					<div class="close">×</div>

					<h2>Quick Reference</h2>

					<table>
						<tr>
							<td>
								<pre><code><span class="highlight">*</span>This is italicized<span class="highlight">*</span>, <wbr/>and <span class="highlight">**</span>this is bold<span class="highlight">**</span>.</code></pre>
							</td>
							<td><p>Use <code>*</code> or <code>_</code> for emphasis.</p></td>
						</tr>
						<tr>
							<td>
								<pre><code><span class="highlight">#</span> This is a first level header</code></pre>
							</td>
							<td><p>Use one or more hash marks for headers: <code>#&nbsp;H1</code>, <code>##&nbsp;H2</code>, <code>###&nbsp;H3</code>…</p></td>
						</tr>
						<tr>
							<td>
								<pre><code>This is a link to <wbr/><span class="highlight">[Google](http://www.google.com)</span></code></pre>
							</td>
							<td><p></p></td>
						</tr>
						<tr>
							<td>
								<pre><code>First line.<span class="highlight">  </span>
Second line.</code></pre>
							</td>
							<td><p>End a line with two spaces for a linebreak.</p></td>
						</tr>
						<tr>
							<td>
								<pre><code><span class="highlight">- </span>Unordered list item
<span class="highlight">- </span>Unordered list item</code></pre>
							</td>
							<td><p>Unordered (bulleted) lists use asterisks, pluses, or hyphens (<code>*</code>, <code>+</code>, or <code>-</code>) as list markers.</p></td>
						</tr>
						<tr>
							<td>
								<pre><code><span class="highlight">1. </span>Ordered list item
<span class="highlight">2. </span>Ordered list item</code></pre>
							</td>
							<td><p>Ordered (numbered) lists use regular numbers, followed by periods, as list markers.</p></td>
						</tr>
						<tr>
							<td><pre><code><span class="highlight">    </span>/* This is a code block */</code></pre></td>
							<td><p>Indent four spaces for a preformatted block.</p></td>
						</tr>
						<tr>
							<td><pre><code>Let's talk about <span class="highlight">`</span>&lt;html&gt;<span class="highlight">`</span>!</code></pre></td>
							<td><p>Use backticks for inline code.</p></td>
						</tr>
						<tr>
							<td>
								<pre><code><span class="highlight">![](http://w3.org/Icons/valid-xhtml10)</span></code></pre>
							</td>
							<td><p>Images are exactly like links, with an exclamation mark in front of them.</p></td>
						</tr>
					</table>

					<p><a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">Full Markdown documentation</a></p>
				</div>

				<div class="top_panel" id="about">
					<div class="close">×</div>

					<h2>About MME</h2>

					<p>Hi, I'm <a href="http://pioul.fr/a-propos/" target="_blank">Philippe Masset</a>.</p>
					<p>I made the Minimalist Online Markdown Editor because I love Markdown and simple things.<br/>
						The whole source code is on <a href="https://github.com/pioul/Minimalist-Online-Markdown-Editor" target="_blank">GitHub</a>, and this editor is also available offline and with file support as a <a href="https://chrome.google.com/webstore/detail/minimalist-markdown-edito/pghodfjepegmciihfhdipmimghiakcjf" target="_blank">Chrome app</a>.</p>
					<p>If you have any suggestions or remarks whatsoever, just click on my name above and you'll have plenty of ways of contacting me.</p>

					<h3>Privacy</h3>

					<ul>
						<li>No data is sent to any server – everything you type stays inside your browser</li>
						<li>The editor automatically saves what you write locally for future use.<br/>
							If using a public computer, either empty the left panel before leaving the editor or use your browser's privacy mode</li>
					</ul>
				</div>

				<div class="top_panel" id="settings">
					<div class="close">×</div>

					<h2>Settings</h2>

					<p>
						<label>Text size</label>
						<a href="#" class="button" id="decrease-font-size"></a>
						<a href="#" class="button" id="increase-font-size"></a>
					</p>

					<h2>Shortcuts</h2>

					<ul>
						<li><kbd>Ctrl</kbd> + <kbd>+</kbd> to increase the text size</li>
						<li><kbd>Ctrl</kbd> + <kbd>-</kbd> to decrease the text size</li>
					</ul>

					<h3>Shortcuts on Mac</h3>

					<p>On Mac, replace <kbd>Ctrl</kbd> with <kbd>&#8984;</kbd> (the command key) in the shortcuts above.</p>
				</div>
			</div>
			<div class="wrapper">
				<div class="topbar hidden-when-fullscreen">
					<div class="buttons-container clearfix">
						<a href="#" class="button toppanel" data-toppanel="quick-reference">Quick Reference</a>
						<a href="#" class="button toppanel" data-toppanel="about">About</a>
						<a href="#" class="button icon-settings toppanel" data-toppanel="settings"></a>
						<a href="#" class="button icon-fullscreen feature" data-feature="fullscreen" data-tofocus="markdown" title="Go fullscreen"></a>
					</div>
				</div>
				<textarea id="markdown" class="full-height" placeholder="Write Markdown"># Minimalist Online Markdown Editor

This is the **simplest** and **slickest** online Markdown editor.  
Just write Markdown and see what it looks like as you type. And convert it to HTML in one click.

## Getting started

### How?

Just start typing in the left panel.

### Buttons you might want to use

- **Quick Reference**: that's a reminder of the most basic rules of Markdown
- **HTML | Preview**: *HTML* to see the markup generated from your Markdown text, *Preview* to see how it looks like

### Privacy

- No data is sent to any server – everything you type stays inside your browser
- The editor automatically saves what you write locally for future use.  
  If using a public computer, either empty the left panel before leaving the editor or use your browser's privacy mode</textarea>
			</div>
		</div>
		<div id="right-column">
			<div class="wrapper">
				<div class="topbar hidden-when-fullscreen">
					<div class="buttons-container clearfix">
						<div class="button-group">
							<a href="#" class="button switch" data-switchto="html">HTML</a>
							<a href="#" class="button switch" data-switchto="preview">Preview</a>
						</div>
						<a href="#" class="button icon-sync-scroll feature" data-feature="sync-scroll" title="Toggle sync-scrolling (when enabled, the preview panel will automatically scroll with the left panel)"></a>
						<a href="#" class="button icon-fullscreen feature" data-feature="fullscreen" data-tofocus="" title="Go fullscreen"></a><!-- data-tofocus is set dynamically by the HTML/preview switch -->
					</div>
				</div>
				<div class="bottom-bar hidden-when-fullscreen clearfix">
					<div class="word-count"></div>
				</div>
				<textarea id="html" class="full-height"></textarea>
				<div id="preview" class="full-height"></div>
			</div>
		</div>
		<div class="topbar visible-when-fullscreen">
			<div class="buttons-container clearfix">
				<div class="button-group">
					<a href="#" class="button switch" data-switchto="markdown">Markdown</a>
					<a href="#" class="button switch" data-switchto="html">HTML</a>
					<a href="#" class="button switch" data-switchto="preview">Preview</a>
				</div>
				<a href="#" class="button icon-fullscreen feature" data-feature="fullscreen" title="Exit fullscreen"></a>
			</div>
		</div>
		<div class="bottom-bar visible-when-fullscreen clearfix">
			<div class="word-count"></div>
		</div>
		
		<div id="modal" class="animated bounceInDown">
		    <h2>Post Article</h2>
			<h2 class="post_result"></h2>
		    <input type="text" class="article_title" placeholder="Article title *">
			<input type="text" class="article_url" placeholder="Article url *">
			<input type="text" class="article_title_image" placeholder="Title image url">
			<input type="text" class="article_writer" placeholder="Writer *">
			<input type="text" class="article_publisher" placeholder="Publisher *">
			<button class="cancel_article">Cancel</button><button class="post_article">Post</button>
		</div>
		
		<button class="save"><img src="icons/arrow.svg" width="30" height="30"/></button>
	
    <script>
	var modal = document.querySelector('#modal'),
	    closeModal = document.querySelector('.cancel_article'),
		postArticle = document.querySelector('.post_article'),
		wordCount = document.querySelector('.word-count').innerHTML;
	
	document.querySelector(".save").addEventListener("click", function () {
	    
		modal.style.display = 'block';
		postArticle.addEventListener("click", function () {
		
		    var articleTitle = document.querySelector('.article_title').value,
	            articleUrl = document.querySelector('.article_url').value,
		        articleImage = document.querySelector('.article_title_image').value,
		        articleWriter = document.querySelector('.article_writer').value,
				dArticle = document.querySelector('#preview').innerHTML,
		        articlePublisher = document.querySelector('.article_publisher').value;
        
		    var fd = new FormData();
                fd.append("article", dArticle);
                fd.append("title", articleTitle);
                fd.append("wordCount", wordCount);
                fd.append("writer", articleWriter);
                fd.append("publisher", articlePublisher);
                fd.append("image", articleImage);
                fd.append("url", articleUrl);
          		 
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "http://kanvas-flite.rhcloud.com/post_article.php", true);
		
	        xhr.onload = function() {
                if (this.status == 200) {
                    var resp = JSON.parse(this.response);

                    console.log('Server got:', resp);
				    document.querySelector('.post_result').innerHTML = resp.result;

                };
            };
	
            xhr.send(fd);
        }, false);
		
    }, false);
	
	closeModal.addEventListener("click", function () {
	    
		modal.style.display = 'none';
	}, false);
    </script>	
	</body>
</html>